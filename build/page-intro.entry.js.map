{"file":"page-intro.entry.esm.js","mappings":"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","names":[],"sources":["src/components/page-intro/page-intro.css?tag=page-intro","src/components/page-intro/page-intro.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n\n.overflow-y-hidden {\n  --overflow: hidden\n}\n\n.container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n}\n\n.flash-container {\n  display: none;\n  transform: scale(0.01);\n  flex-grow: 1;\n  position: relative;\n  justify-content: center;\n  align-items: center;\n  font-size: 200px;\n  white-space: nowrap;\n}\n\n.skip-intro-btn {\n  position: relative;\n  display: none;\n}\n\n.go-btn {\n  flex-grow: 1;\n  position: relative;\n  justify-content: center;\n  align-items: center;\n}\n\n.container.playing .skip-intro-btn {\n  display: block;\n}\n\n.container.initial .go-btn {\n  display: flex;\n}\n\n.container.playing .go-btn,\n.container.ended .go-btn {\n  display: none;\n}\n","import { Animation, createAnimation } from '@ionic/core';\nimport { Component, Fragment, h, State } from '@stencil/core';\nimport { animationBuilderFadePages } from '../../global/page-animation';\nimport routerProvider from '../../global/router-provider';\nimport { state } from '../../global/store';\n\n@Component({\n  tag: 'page-intro',\n  styleUrl: 'page-intro.css',\n  // shadow: true,\n})\nexport class PageIntro {\n  skipBtn: HTMLIonButtonElement;\n\n  flash1: Animation;\n  flash2: Animation;\n  flash3: Animation;\n\n  disconnected = false;\n\n  @State() playing: 'initial' | 'playing' | 'ended' = 'initial';\n\n  async componentDidLoad() {\n    if (state.playedIntro) this.skipIntro();\n  }\n  disconnectedCallback() {\n    this.playing = 'initial';\n    this.disconnected = true;\n  }\n  private async playIntro() {\n    this.playing = 'playing';\n    this.flash1.stop();\n    this.flash2.stop();\n    this.flash3.stop();\n    await this.flash1.play();\n    await this.flash2.play();\n    await this.flash3.play();\n    this.playing = 'ended';\n    state.playedIntro = true;\n    this.navigateToPuzzle();\n  }\n\n  private skipIntro() {\n    this.flash1.stop();\n    this.flash2.stop();\n    this.flash3.stop();\n    this.playing = 'ended';\n    state.playedIntro = true;\n    this.navigateToPuzzle();\n  }\n\n  private navigateToPuzzle() {\n    if (!this.disconnected) routerProvider.ionRouterElement.push('/puzzle', 'forward', animationBuilderFadePages);\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ion-content class=\"ion-padding overflow-y-hidden\" id=\"main-menu\">\n          <div class={`container ${this.playing}`}>\n            <div class=\"go-btn\">\n              <ion-button fill=\"clear\" size=\"large\" onClick={() => this.playIntro()}>\n                Los geht's\n                <ion-icon slot=\"end\" name=\"chevron-forward-outline\"></ion-icon>\n              </ion-button>\n            </div>\n            <Fragment>\n              <div class=\"flash-container hidden\" ref={e => (this.flash1 = this.createShowHideAnimation(e))}>\n                Das jüdische Basel\n              </div>\n              <div class=\"flash-container hidden\" ref={e => (this.flash2 = this.createShowHideAnimation(e))}>\n                1850 bis 1914\n              </div>\n              <div class=\"flash-container hidden\" ref={e => (this.flash3 = this.createShowHideAnimation(e))}>\n                in zwölf Teilen\n              </div>\n              <ion-button fill=\"clear\" class=\"skip-intro-btn\" ref={e => (this.skipBtn = e)} onClick={() => this.skipIntro()}>\n                Intro überspringen\n                <ion-icon slot=\"end\" name=\"chevron-forward-outline\"></ion-icon>\n              </ion-button>\n            </Fragment>\n          </div>\n        </ion-content>\n      </Fragment>\n    );\n  }\n\n  createShowAnimation(el: Element): Animation {\n    return createAnimation('show')\n      .addElement(el)\n      .duration(1500)\n      .keyframes([\n        { offset: 0, opacity: '0', display: 'block' },\n        { offset: 1, opacity: '1', display: 'block' },\n      ]);\n  }\n  createShowHideAnimation(el: Element): Animation {\n    return createAnimation('show-hide')\n      .addElement(el)\n      .duration(2500)\n      .beforeStyles({ display: 'flex' })\n      .afterStyles({ display: 'none' })\n      .keyframes([\n        { offset: 0, opacity: '0' },\n        { offset: 0.2, opacity: '1' },\n        { offset: 0.4, opacity: '1' },\n        { offset: 0.8, opacity: '0', transform: 'scale(1)' },\n        { offset: 1, opacity: '0', transform: 'scale(1)' },\n      ]);\n  }\n}\n"],"version":3}